{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\ahmed\\\\OneDrive\\\\Desktop\\\\easy_cars\\\\frontend\\\\src\\\\pages\\\\LoginPage.js\",\n  _s = $RefreshSig$();\nimport { useState, useContext, useEffect } from \"react\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport FormInput from \"../components/ui/FormInput\";\nimport Button from \"../components/ui/Button\";\nimport Alert from \"../components/ui/Alert\";\nimport Card from \"../components/ui/Card\";\nimport { CardHeader, CardBody, CardFooter } from \"../components/ui/Card\";\nimport \"./LoginPage.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginPage = () => {\n  _s();\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const [formErrors, setFormErrors] = useState({});\n  const [alertMessage, setAlertMessage] = useState(\"\");\n  const [alertType, setAlertType] = useState(\"\");\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const {\n    login,\n    isAuthenticated,\n    error\n  } = useContext(AuthContext);\n  const history = useHistory();\n  const location = useLocation();\n  const {\n    email,\n    password\n  } = formData;\n  useEffect(() => {\n    // If already authenticated, redirect\n    if (isAuthenticated) {\n      const {\n        from\n      } = location.state || {\n        from: {\n          pathname: \"/\"\n        }\n      };\n      history.push(from);\n    }\n\n    // Show error if any\n    if (error) {\n      setAlertMessage(error);\n      setAlertType(\"error\");\n      setIsSubmitting(false);\n    }\n  }, [isAuthenticated, error, history, location]);\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n    // Clear error for this field when user starts typing\n    if (formErrors[e.target.name]) {\n      setFormErrors({\n        ...formErrors,\n        [e.target.name]: \"\"\n      });\n    }\n  };\n  const validateForm = () => {\n    const errors = {};\n    if (!email) errors.email = \"Email is required\";\n    if (!password) errors.password = \"Password is required\";\n    return errors;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    // Validate form\n    const errors = validateForm();\n    if (Object.keys(errors).length > 0) {\n      setFormErrors(errors);\n      return;\n    }\n    setIsSubmitting(true);\n    try {\n      await login(formData);\n      // Redirect will happen in useEffect\n    } catch (err) {\n      setIsSubmitting(false);\n      // Error will be handled in useEffect\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        className: \"login-card\",\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Login to Your Account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n          children: [alertMessage && /*#__PURE__*/_jsxDEV(Alert, {\n            message: alertMessage,\n            type: alertType,\n            onClose: () => setAlertMessage(\"\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 30\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(FormInput, {\n              label: \"Email\",\n              type: \"email\",\n              id: \"email\",\n              name: \"email\",\n              value: email,\n              placeholder: \"Enter your email\",\n              onChange: handleChange,\n              error: formErrors.email,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n              label: \"Password\",\n              type: \"password\",\n              id: \"password\",\n              name: \"password\",\n              value: password,\n              placeholder: \"Enter your password\",\n              onChange: handleChange,\n              error: formErrors.password,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              type: \"submit\",\n              fullWidth: true,\n              disabled: isSubmitting,\n              children: isSubmitting ? \"Logging in...\" : \"Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardFooter, {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Don't have an account?\", \" \", /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/register\",\n              className: \"link\",\n              children: \"Register here\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n_s(LoginPage, \"BZoAfkvPk2XcJHh7w846FGdJtkA=\", false, function () {\n  return [useHistory, useLocation];\n});\n_c = LoginPage;\nexport default LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useState","useContext","useEffect","Link","useHistory","useLocation","AuthContext","FormInput","Button","Alert","Card","CardHeader","CardBody","CardFooter","jsxDEV","_jsxDEV","LoginPage","formData","setFormData","email","password","formErrors","setFormErrors","alertMessage","setAlertMessage","alertType","setAlertType","isSubmitting","setIsSubmitting","login","isAuthenticated","error","history","location","from","state","pathname","push","handleChange","e","target","name","value","validateForm","errors","handleSubmit","preventDefault","Object","keys","length","err","className","children","fileName","lineNumber","columnNumber","message","type","onClose","onSubmit","label","id","placeholder","onChange","required","fullWidth","disabled","to","_c","$RefreshReg$"],"sources":["C:/Users/ahmed/OneDrive/Desktop/easy_cars/frontend/src/pages/LoginPage.js"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useContext, useEffect } from \"react\"\r\nimport { Link, useHistory, useLocation } from \"react-router-dom\"\r\nimport { AuthContext } from \"../context/AuthContext\"\r\nimport FormInput from \"../components/ui/FormInput\"\r\nimport Button from \"../components/ui/Button\"\r\nimport Alert from \"../components/ui/Alert\"\r\nimport Card from \"../components/ui/Card\"\r\nimport { CardHeader, CardBody, CardFooter } from \"../components/ui/Card\"\r\nimport \"./LoginPage.css\"\r\n\r\nconst LoginPage = () => {\r\n  const [formData, setFormData] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  })\r\n  const [formErrors, setFormErrors] = useState({})\r\n  const [alertMessage, setAlertMessage] = useState(\"\")\r\n  const [alertType, setAlertType] = useState(\"\")\r\n  const [isSubmitting, setIsSubmitting] = useState(false)\r\n\r\n  const { login, isAuthenticated, error } = useContext(AuthContext)\r\n  const history = useHistory()\r\n  const location = useLocation()\r\n\r\n  const { email, password } = formData\r\n\r\n  useEffect(() => {\r\n    // If already authenticated, redirect\r\n    if (isAuthenticated) {\r\n      const { from } = location.state || { from: { pathname: \"/\" } }\r\n      history.push(from)\r\n    }\r\n\r\n    // Show error if any\r\n    if (error) {\r\n      setAlertMessage(error)\r\n      setAlertType(\"error\")\r\n      setIsSubmitting(false)\r\n    }\r\n  }, [isAuthenticated, error, history, location])\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value })\r\n    // Clear error for this field when user starts typing\r\n    if (formErrors[e.target.name]) {\r\n      setFormErrors({ ...formErrors, [e.target.name]: \"\" })\r\n    }\r\n  }\r\n\r\n  const validateForm = () => {\r\n    const errors = {}\r\n    if (!email) errors.email = \"Email is required\"\r\n    if (!password) errors.password = \"Password is required\"\r\n    return errors\r\n  }\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault()\r\n\r\n    // Validate form\r\n    const errors = validateForm()\r\n    if (Object.keys(errors).length > 0) {\r\n      setFormErrors(errors)\r\n      return\r\n    }\r\n\r\n    setIsSubmitting(true)\r\n\r\n    try {\r\n      await login(formData)\r\n      // Redirect will happen in useEffect\r\n    } catch (err) {\r\n      setIsSubmitting(false)\r\n      // Error will be handled in useEffect\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"login-page\">\r\n      <div className=\"container\">\r\n        <Card className=\"login-card\">\r\n          <CardHeader>\r\n            <h2>Login to Your Account</h2>\r\n          </CardHeader>\r\n          <CardBody>\r\n            {alertMessage && <Alert message={alertMessage} type={alertType} onClose={() => setAlertMessage(\"\")} />}\r\n            <form onSubmit={handleSubmit}>\r\n              <FormInput\r\n                label=\"Email\"\r\n                type=\"email\"\r\n                id=\"email\"\r\n                name=\"email\"\r\n                value={email}\r\n                placeholder=\"Enter your email\"\r\n                onChange={handleChange}\r\n                error={formErrors.email}\r\n                required\r\n              />\r\n              <FormInput\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                name=\"password\"\r\n                value={password}\r\n                placeholder=\"Enter your password\"\r\n                onChange={handleChange}\r\n                error={formErrors.password}\r\n                required\r\n              />\r\n              <Button type=\"submit\" fullWidth disabled={isSubmitting}>\r\n                {isSubmitting ? \"Logging in...\" : \"Login\"}\r\n              </Button>\r\n            </form>\r\n          </CardBody>\r\n          <CardFooter>\r\n            <p>\r\n              Don't have an account?{\" \"}\r\n              <Link to=\"/register\" className=\"link\">\r\n                Register here\r\n              </Link>\r\n            </p>\r\n          </CardFooter>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoginPage\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}