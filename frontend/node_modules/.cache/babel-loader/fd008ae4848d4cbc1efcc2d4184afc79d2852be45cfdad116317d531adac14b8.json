{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\ahmed\\\\OneDrive\\\\Desktop\\\\easy_cars\\\\frontend\\\\src\\\\pages\\\\RentCarPage.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useContext } from \"react\";\nimport { useParams, useHistory, Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport Card from \"../components/ui/Card\";\nimport { CardHeader, CardBody, CardFooter } from \"../components/ui/Card\";\nimport Button from \"../components/ui/Button\";\nimport FormInput from \"../components/ui/FormInput\";\nimport Alert from \"../components/ui/Alert\";\nimport Spinner from \"../components/ui/Spinner\";\nimport \"./RentCarPage.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst RentCarPage = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const history = useHistory();\n  const {\n    user\n  } = useContext(AuthContext);\n  const [car, setCar] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n  const [formData, setFormData] = useState({\n    startDate: \"\",\n    endDate: \"\",\n    paymentMethod: \"credit_card\"\n  });\n  const [rentalSummary, setRentalSummary] = useState({\n    days: 0,\n    dailyRate: 0,\n    totalPrice: 0\n  });\n  useEffect(() => {\n    const fetchCarDetails = async () => {\n      try {\n        const res = await axios.get(`/api/cars/${id}`);\n        const carData = res.data.data;\n        if (!carData.forRent || !carData.available) {\n          setError(\"This car is not available for rent.\");\n          setLoading(false);\n          return;\n        }\n        setCar(carData);\n\n        // Set default dates (today and tomorrow)\n        const today = new Date();\n        const tomorrow = new Date(today);\n        tomorrow.setDate(tomorrow.getDate() + 1);\n        const formattedToday = today.toISOString().split(\"T\")[0];\n        const formattedTomorrow = tomorrow.toISOString().split(\"T\")[0];\n        setFormData({\n          ...formData,\n          startDate: formattedToday,\n          endDate: formattedTomorrow\n        });\n\n        // Calculate initial rental summary\n        if (carData.rentalPrice && carData.rentalPrice.daily) {\n          setRentalSummary({\n            days: 1,\n            dailyRate: carData.rentalPrice.daily,\n            totalPrice: carData.rentalPrice.daily\n          });\n        }\n      } catch (err) {\n        setError(\"Failed to fetch car details. Please try again later.\");\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchCarDetails();\n  }, [id]);\n  useEffect(() => {\n    // Calculate rental summary whenever dates change\n    if (car && car.rentalPrice && formData.startDate && formData.endDate) {\n      const start = new Date(formData.startDate);\n      const end = new Date(formData.endDate);\n      const diffTime = Math.abs(end - start);\n      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n      if (diffDays <= 0) {\n        return;\n      }\n      const dailyRate = car.rentalPrice.daily;\n      const totalPrice = dailyRate * diffDays;\n      setRentalSummary({\n        days: diffDays,\n        dailyRate,\n        totalPrice\n      });\n    }\n  }, [car, formData.startDate, formData.endDate]);\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!formData.startDate || !formData.endDate) {\n      setError(\"Please select both start and end dates.\");\n      return;\n    }\n    const start = new Date(formData.startDate);\n    const end = new Date(formData.endDate);\n    if (end <= start) {\n      setError(\"End date must be after start date.\");\n      return;\n    }\n    setSubmitting(true);\n    setError(\"\");\n    try {\n      const rentalData = {\n        carId: id,\n        startDate: formData.startDate,\n        endDate: formData.endDate,\n        paymentMethod: formData.paymentMethod\n      };\n      await axios.post(\"/api/rentals\", rentalData);\n      setSuccess(\"Your rental has been successfully booked!\");\n\n      // Redirect to profile page after 2 seconds\n      setTimeout(() => {\n        history.push(\"/profile\");\n      }, 2000);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Failed to book rental. Please try again.\");\n      console.error(err);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"spinner-container\",\n      children: /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this);\n  }\n  if (error && !car) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/cars\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            children: \"Back to Car Listings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"rent-car-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Rent a Car\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rent-car-content\",\n        children: [car && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"car-summary\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: `${car.make} ${car.model} (${car.year})`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"car-image\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: car.images[0] || \"/placeholder-car.jpg\",\n                  alt: `${car.make} ${car.model}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"car-details\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Color:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 197,\n                    columnNumber: 23\n                  }, this), \" \", car.color]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Transmission:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 200,\n                    columnNumber: 23\n                  }, this), \" \", car.transmission]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Fuel Type:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 203,\n                    columnNumber: 23\n                  }, this), \" \", car.fuelType]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Daily Rate:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 206,\n                    columnNumber: 23\n                  }, this), \" $\", car.rentalPrice.daily]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rental-form\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Rental Details\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n              children: success ? /*#__PURE__*/_jsxDEV(Alert, {\n                message: success,\n                type: \"success\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n                  message: error,\n                  type: \"error\",\n                  onClose: () => setError(\"\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 31\n                }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                  onSubmit: handleSubmit,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-row\",\n                    children: [/*#__PURE__*/_jsxDEV(FormInput, {\n                      label: \"Start Date\",\n                      type: \"date\",\n                      id: \"startDate\",\n                      name: \"startDate\",\n                      value: formData.startDate,\n                      onChange: handleChange,\n                      min: new Date().toISOString().split(\"T\")[0],\n                      required: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 227,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n                      label: \"End Date\",\n                      type: \"date\",\n                      id: \"endDate\",\n                      name: \"endDate\",\n                      value: formData.endDate,\n                      onChange: handleChange,\n                      min: formData.startDate || new Date().toISOString().split(\"T\")[0],\n                      required: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 237,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 226,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"paymentMethod\",\n                      children: \"Payment Method\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 250,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                      id: \"paymentMethod\",\n                      name: \"paymentMethod\",\n                      value: formData.paymentMethod,\n                      onChange: handleChange,\n                      className: \"form-select\",\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"credit_card\",\n                        children: \"Credit Card\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 258,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"debit_card\",\n                        children: \"Debit Card\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 259,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"paypal\",\n                        children: \"PayPal\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 260,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 251,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rental-summary\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      children: \"Rental Summary\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 265,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"summary-item\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"Daily Rate:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 267,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: [\"$\", rentalSummary.dailyRate]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 268,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 266,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"summary-item\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"Number of Days:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 271,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: rentalSummary.days\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 272,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 270,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"summary-item total\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"Total Price:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 275,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: [\"$\", rentalSummary.totalPrice]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 276,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 274,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 264,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"renter-info\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      children: \"Renter Information\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 281,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"info-item\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"Name:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 283,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: user.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 284,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 282,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"info-item\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"Email:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 287,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: user.email\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 288,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 286,\n                      columnNumber: 25\n                    }, this), user.phone && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"info-item\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"Phone:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 292,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: user.phone\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 293,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 291,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 280,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    type: \"submit\",\n                    fullWidth: true,\n                    disabled: submitting,\n                    children: submitting ? \"Processing...\" : \"Confirm Rental\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 298,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CardFooter, {\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: `/cars/${id}`,\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"secondary\",\n                  children: \"Back to Car Details\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 180,\n    columnNumber: 5\n  }, this);\n};\n_s(RentCarPage, \"utsPQ3F40oWcdvlzTyEu4S7Y2yI=\", false, function () {\n  return [useParams, useHistory];\n});\n_c = RentCarPage;\nexport default RentCarPage;\nvar _c;\n$RefreshReg$(_c, \"RentCarPage\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useState","useEffect","useContext","useParams","useHistory","Link","axios","AuthContext","Card","CardHeader","CardBody","CardFooter","Button","FormInput","Alert","Spinner","jsxDEV","_jsxDEV","Fragment","_Fragment","RentCarPage","id","history","user","car","setCar","loading","setLoading","submitting","setSubmitting","error","setError","success","setSuccess","formData","setFormData","startDate","endDate","paymentMethod","rentalSummary","setRentalSummary","days","dailyRate","totalPrice","fetchCarDetails","res","get","carData","data","forRent","available","today","Date","tomorrow","setDate","getDate","formattedToday","toISOString","split","formattedTomorrow","rentalPrice","daily","err","console","start","end","diffTime","Math","abs","diffDays","ceil","handleChange","e","target","name","value","handleSubmit","preventDefault","rentalData","carId","post","setTimeout","push","_err$response","_err$response$data","response","message","className","children","fileName","lineNumber","columnNumber","to","make","model","year","src","images","alt","color","transmission","fuelType","type","onClose","onSubmit","label","onChange","min","required","htmlFor","email","phone","fullWidth","disabled","variant","_c","$RefreshReg$"],"sources":["C:/Users/ahmed/OneDrive/Desktop/easy_cars/frontend/src/pages/RentCarPage.js"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect, useContext } from \"react\"\r\nimport { useParams, useHistory, Link } from \"react-router-dom\"\r\nimport axios from \"axios\"\r\nimport { AuthContext } from \"../context/AuthContext\"\r\nimport Card from \"../components/ui/Card\"\r\nimport { CardHeader, CardBody, CardFooter } from \"../components/ui/Card\"\r\nimport Button from \"../components/ui/Button\"\r\nimport FormInput from \"../components/ui/FormInput\"\r\nimport Alert from \"../components/ui/Alert\"\r\nimport Spinner from \"../components/ui/Spinner\"\r\nimport \"./RentCarPage.css\"\r\n\r\nconst RentCarPage = () => {\r\n  const { id } = useParams()\r\n  const history = useHistory()\r\n  const { user } = useContext(AuthContext)\r\n\r\n  const [car, setCar] = useState(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [submitting, setSubmitting] = useState(false)\r\n  const [error, setError] = useState(\"\")\r\n  const [success, setSuccess] = useState(\"\")\r\n\r\n  const [formData, setFormData] = useState({\r\n    startDate: \"\",\r\n    endDate: \"\",\r\n    paymentMethod: \"credit_card\",\r\n  })\r\n\r\n  const [rentalSummary, setRentalSummary] = useState({\r\n    days: 0,\r\n    dailyRate: 0,\r\n    totalPrice: 0,\r\n  })\r\n\r\n  useEffect(() => {\r\n    const fetchCarDetails = async () => {\r\n      try {\r\n        const res = await axios.get(`/api/cars/${id}`)\r\n        const carData = res.data.data\r\n\r\n        if (!carData.forRent || !carData.available) {\r\n          setError(\"This car is not available for rent.\")\r\n          setLoading(false)\r\n          return\r\n        }\r\n\r\n        setCar(carData)\r\n\r\n        // Set default dates (today and tomorrow)\r\n        const today = new Date()\r\n        const tomorrow = new Date(today)\r\n        tomorrow.setDate(tomorrow.getDate() + 1)\r\n\r\n        const formattedToday = today.toISOString().split(\"T\")[0]\r\n        const formattedTomorrow = tomorrow.toISOString().split(\"T\")[0]\r\n\r\n        setFormData({\r\n          ...formData,\r\n          startDate: formattedToday,\r\n          endDate: formattedTomorrow,\r\n        })\r\n\r\n        // Calculate initial rental summary\r\n        if (carData.rentalPrice && carData.rentalPrice.daily) {\r\n          setRentalSummary({\r\n            days: 1,\r\n            dailyRate: carData.rentalPrice.daily,\r\n            totalPrice: carData.rentalPrice.daily,\r\n          })\r\n        }\r\n      } catch (err) {\r\n        setError(\"Failed to fetch car details. Please try again later.\")\r\n        console.error(err)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    fetchCarDetails()\r\n  }, [id])\r\n\r\n  useEffect(() => {\r\n    // Calculate rental summary whenever dates change\r\n    if (car && car.rentalPrice && formData.startDate && formData.endDate) {\r\n      const start = new Date(formData.startDate)\r\n      const end = new Date(formData.endDate)\r\n      const diffTime = Math.abs(end - start)\r\n      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24))\r\n\r\n      if (diffDays <= 0) {\r\n        return\r\n      }\r\n\r\n      const dailyRate = car.rentalPrice.daily\r\n      const totalPrice = dailyRate * diffDays\r\n\r\n      setRentalSummary({\r\n        days: diffDays,\r\n        dailyRate,\r\n        totalPrice,\r\n      })\r\n    }\r\n  }, [car, formData.startDate, formData.endDate])\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value,\r\n    })\r\n  }\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault()\r\n\r\n    if (!formData.startDate || !formData.endDate) {\r\n      setError(\"Please select both start and end dates.\")\r\n      return\r\n    }\r\n\r\n    const start = new Date(formData.startDate)\r\n    const end = new Date(formData.endDate)\r\n\r\n    if (end <= start) {\r\n      setError(\"End date must be after start date.\")\r\n      return\r\n    }\r\n\r\n    setSubmitting(true)\r\n    setError(\"\")\r\n\r\n    try {\r\n      const rentalData = {\r\n        carId: id,\r\n        startDate: formData.startDate,\r\n        endDate: formData.endDate,\r\n        paymentMethod: formData.paymentMethod,\r\n      }\r\n\r\n      await axios.post(\"/api/rentals\", rentalData)\r\n\r\n      setSuccess(\"Your rental has been successfully booked!\")\r\n\r\n      // Redirect to profile page after 2 seconds\r\n      setTimeout(() => {\r\n        history.push(\"/profile\")\r\n      }, 2000)\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || \"Failed to book rental. Please try again.\")\r\n      console.error(err)\r\n    } finally {\r\n      setSubmitting(false)\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"spinner-container\">\r\n        <Spinner />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (error && !car) {\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"error-message\">\r\n          <p>{error}</p>\r\n          <Link to=\"/cars\">\r\n            <Button>Back to Car Listings</Button>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"rent-car-page\">\r\n      <div className=\"container\">\r\n        <h1>Rent a Car</h1>\r\n\r\n        <div className=\"rent-car-content\">\r\n          {car && (\r\n            <div className=\"car-summary\">\r\n              <Card>\r\n                <CardHeader>\r\n                  <h2>{`${car.make} ${car.model} (${car.year})`}</h2>\r\n                </CardHeader>\r\n                <CardBody>\r\n                  <div className=\"car-image\">\r\n                    <img src={car.images[0] || \"/placeholder-car.jpg\"} alt={`${car.make} ${car.model}`} />\r\n                  </div>\r\n                  <div className=\"car-details\">\r\n                    <p>\r\n                      <strong>Color:</strong> {car.color}\r\n                    </p>\r\n                    <p>\r\n                      <strong>Transmission:</strong> {car.transmission}\r\n                    </p>\r\n                    <p>\r\n                      <strong>Fuel Type:</strong> {car.fuelType}\r\n                    </p>\r\n                    <p>\r\n                      <strong>Daily Rate:</strong> ${car.rentalPrice.daily}\r\n                    </p>\r\n                  </div>\r\n                </CardBody>\r\n              </Card>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"rental-form\">\r\n            <Card>\r\n              <CardHeader>\r\n                <h2>Rental Details</h2>\r\n              </CardHeader>\r\n              <CardBody>\r\n                {success ? (\r\n                  <Alert message={success} type=\"success\" />\r\n                ) : (\r\n                  <>\r\n                    {error && <Alert message={error} type=\"error\" onClose={() => setError(\"\")} />}\r\n                    <form onSubmit={handleSubmit}>\r\n                      <div className=\"form-row\">\r\n                        <FormInput\r\n                          label=\"Start Date\"\r\n                          type=\"date\"\r\n                          id=\"startDate\"\r\n                          name=\"startDate\"\r\n                          value={formData.startDate}\r\n                          onChange={handleChange}\r\n                          min={new Date().toISOString().split(\"T\")[0]}\r\n                          required\r\n                        />\r\n                        <FormInput\r\n                          label=\"End Date\"\r\n                          type=\"date\"\r\n                          id=\"endDate\"\r\n                          name=\"endDate\"\r\n                          value={formData.endDate}\r\n                          onChange={handleChange}\r\n                          min={formData.startDate || new Date().toISOString().split(\"T\")[0]}\r\n                          required\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"form-group\">\r\n                        <label htmlFor=\"paymentMethod\">Payment Method</label>\r\n                        <select\r\n                          id=\"paymentMethod\"\r\n                          name=\"paymentMethod\"\r\n                          value={formData.paymentMethod}\r\n                          onChange={handleChange}\r\n                          className=\"form-select\"\r\n                        >\r\n                          <option value=\"credit_card\">Credit Card</option>\r\n                          <option value=\"debit_card\">Debit Card</option>\r\n                          <option value=\"paypal\">PayPal</option>\r\n                        </select>\r\n                      </div>\r\n\r\n                      <div className=\"rental-summary\">\r\n                        <h3>Rental Summary</h3>\r\n                        <div className=\"summary-item\">\r\n                          <span>Daily Rate:</span>\r\n                          <span>${rentalSummary.dailyRate}</span>\r\n                        </div>\r\n                        <div className=\"summary-item\">\r\n                          <span>Number of Days:</span>\r\n                          <span>{rentalSummary.days}</span>\r\n                        </div>\r\n                        <div className=\"summary-item total\">\r\n                          <span>Total Price:</span>\r\n                          <span>${rentalSummary.totalPrice}</span>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"renter-info\">\r\n                        <h3>Renter Information</h3>\r\n                        <div className=\"info-item\">\r\n                          <span>Name:</span>\r\n                          <span>{user.name}</span>\r\n                        </div>\r\n                        <div className=\"info-item\">\r\n                          <span>Email:</span>\r\n                          <span>{user.email}</span>\r\n                        </div>\r\n                        {user.phone && (\r\n                          <div className=\"info-item\">\r\n                            <span>Phone:</span>\r\n                            <span>{user.phone}</span>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n\r\n                      <Button type=\"submit\" fullWidth disabled={submitting}>\r\n                        {submitting ? \"Processing...\" : \"Confirm Rental\"}\r\n                      </Button>\r\n                    </form>\r\n                  </>\r\n                )}\r\n              </CardBody>\r\n              <CardFooter>\r\n                <Link to={`/cars/${id}`}>\r\n                  <Button variant=\"secondary\">Back to Car Details</Button>\r\n                </Link>\r\n              </CardFooter>\r\n            </Card>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RentCarPage\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}